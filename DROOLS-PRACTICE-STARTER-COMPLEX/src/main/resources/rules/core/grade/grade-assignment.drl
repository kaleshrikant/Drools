package rules.core.grade;

import com.kaleshrikant.core.grade.model.Student;
import com.kaleshrikant.core.grade.model.ScholarshipPolicy;

// ðŸŒ GLOBAL VARIABLES
global java.util.List logCollector;

/**
 * ðŸ“œ Student Grade Assignment and Evaluation Rules - Business Logic Implementation
 *
 * ðŸŽ¯ Purpose: Assign grades based on student marks
 * ðŸ§Š Facts: Student object with name and marks
 * âž• Conditions: Marks thresholds for grade classification
 * ðŸ”¥ Actions: Log grade and update status
 */

rule "Grade A Assignment"
    when
        $student : Student(marks >= 90)
    then
        logCollector.add("ðŸ… " + $student.getName() + " scored Grade A");
        $student.setGrade("A");
end

rule "Grade B Assignment"
    when
        $student : Student(marks >= 75 && marks < 90)
    then
        logCollector.add("ðŸ¥ˆ " + $student.getName() + " scored Grade B");
        $student.setGrade("B");
end

rule "Grade C Assignment"
    when
        $student : Student(marks >= 60 && marks < 75)
    then
        logCollector.add("ðŸ¥‰ " + $student.getName() + " scored Grade C");
        $student.setGrade("C");
end

rule "Grade D Assignment"
    when
        $student : Student(marks >= 40 && marks < 60)
    then
        logCollector.add("ðŸ“˜ " + $student.getName() + " scored Grade D");
        $student.setGrade("D");
end

rule "Grade F Assignment"
    when
        $student : Student(marks < 40)
    then
        logCollector.add("âŒ " + $student.getName() + " scored Grade F");
        $student.setGrade("F");
end

/**
 * ðŸ“œ Extended Business Logic - Scholarship Eligibility
 *
 * ðŸŽ¯ Purpose: Identify students eligible for scholarship
 * ðŸ§Š Facts: Student and ScholarshipPolicy
 * âž• Conditions: Grade A and policy match
 * ðŸ”¥ Actions: Log eligibility and update status
 */

rule "Scholarship Eligibility Evaluation"
    when
        $student : Student(grade == "A")
        $policy : ScholarshipPolicy(minGrade == "A")
    then
        logCollector.add("ðŸŽ“ " + $student.getName() + " is eligible for scholarship.");
        $student.setStatus("SCHOLARSHIP_ELIGIBLE");
end
